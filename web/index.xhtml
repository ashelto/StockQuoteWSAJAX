<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <title>Stock Code</title>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    </h:head>
    <h:body>
        Stock Web Service
        <h:form id="form1" >
            Stock Code : <h:inputText id="idNo" value="#{stockController.stockCode}">
                <f:ajax event="keyup" render="stockResult"/>
            </h:inputText>
            <h:outputText value="#{stockController.showStockPrice()}" id="stockResult"/><br/>
            <h:commandButton id="update" class="try" style="display:none">
            <f:ajax execute="@form" render="stockResult"/>
            </h:commandButton>
            <h:commandButton id="submit" 
             value="Show Message" action="#{stockController.showStockPrice()}">
            <f:param name="username" value="#{stockController.showStockPrice()}" />
            </h:commandButton>
            </h:form>
    </h:body>
    <script>
  setInterval( function() { $( '.try' ).trigger( 'click' ) }, 30000 );
  setInterval( function() { $( '.try' ).hide}, 1000 );
    </script>
</html>

